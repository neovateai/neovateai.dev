import { Callout } from 'nextra/components';

# CLI

可用命令和参数的完整列表。

## 命令

| 命令 | 描述 | 用法 |
| --- | --- | --- |
| `neovate` | 交互模式 | `neovate` |
| `neovate "prompt"` | 带有初始提示的交互模式 | `neovate "explain this project"` |
| `neovate -q "prompt"` | 静默模式，仅输出结果 | `neovate -q "explain this project"` |
| `cat file \| neovate -q "prompt"` | 处理管道内容 | `cat file \| neovate -q "explain"` |
| `neovate -c` | 从上次会话恢复 | `neovate -c` |
| `neovate -r <session_id>` | 从特定会话恢复 | `neovate -r foo123` |
| `neovate config` | 配置管理 | 查看 [设置](./settings) |
| `neovate mcp` | MCP 服务器管理 | 查看 [MCP](./mcp) |
| `neovate commit` | 提交更改 | `neovate commit` |
| `neovate log [file]` | 以 HTML 格式查看会话日志 | `neovate log` |
| `neovate run` | 运行命令 | `neovate run` |
| `neovate skill` | 管理技能 | 查看 [技能](./skills) |
| `neovate update` | 更新 Neovate Code | `neovate update` |
| `neovate workspace` | 管理工作区 | `neovate workspace` |

## 选项

| 参数 | 描述 |
| --- | --- |
| `--append-system-prompt <append_system_prompt>` | 追加系统提示 |
| `--approval-mode <approval_mode>` | 指定批准模式，选项：`yolo`、`autoEdit`、`default` |
| `--browser` | 启用浏览器集成 |
| `-c, --continue` | 从上次会话恢复 |
| `--cwd <cwd>` | 指定工作目录 |
| `-h, --help` | 显示帮助 |
| `--language <language>` | 指定语言，选项：`en`、`zh` 等 |
| `-m, --model <model_id>` | 指定模型，格式：`provider_id/model_id` |
| `--mcp-config <mcp_config>` | 指定 MCP 服务器配置（包含"mcpServers"对象的 JSON 字符串或文件路径） |
| `--output-format <output_format>` | 指定输出格式，选项：`stream-json`、`json`、`text`，必须与 `--quiet` 一起使用 |
| `--output-style <output_style>` | 指定输出样式（名称或路径） |
| `--plan-model <plan_model>` | 指定规划模型 |
| `--plugin <plugin>` | 指定插件 |
| `-q, --quiet` | 静默模式，仅输出结果 |
| `-r, --resume <resume>` | 指定恢复，格式：`session_id` |
| `--small-model <small_model>` | 指定用于快速操作的小模型 |
| `--system-prompt <system_prompt>` | 指定系统提示 |
| `--tools <json>` | 工具配置（以工具名称为键、布尔值为值的 JSON 对象） |
| `-v, --version` | 显示版本 |
| `--vision-model <vision_model>` | 指定用于图像任务的视觉模型 |

### neovate commit

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |
| `-s, --stage` | 提交前暂存所有更改 |
| `-c, --commit` | 自动提交更改 |
| `-n, --no-verify` | 跳过 pre-commit 钩子 |
| `-i, --interactive` | 交互模式（默认） |
| `-m, --model <model>` | 指定要使用的模型 |
| `--language <language>` | 设置提交消息的语言 |
| `--copy` | 将提交消息复制到剪贴板 |
| `--push` | 提交后推送更改 |
| `--follow-style` | 遵循现有仓库的提交风格 |
| `--checkout` | 根据提交消息创建并切换到新分支 |

### neovate config

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |
| `-g, --global` | 使用全局配置而不是项目配置 |

子命令：
- `get <key>` - 获取配置值
- `set <key> <value>` - 设置配置值
- `remove|rm <key> [values...]` - 删除配置值或从配置数组中删除项
- `list|ls` - 列出所有配置值
- `add <key> <value>` - 添加配置值

### neovate mcp

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |
| `-g, --global` | 使用全局配置而不是项目配置 |
| `-e, --env <json>` | 以 JSON 字符串形式的环境变量 |
| `--sse` | 对基于 URL 的服务器使用 SSE 传输 |

子命令：
- `get <name>` - 获取 MCP 服务器配置
- `add <name> <command> [args...]` - 添加 MCP 服务器
- `remove|rm <name>` - 删除 MCP 服务器
- `list|ls` - 列出所有 MCP 服务器
- `enable <name>` - 启用 MCP 服务器
- `disable <name>` - 禁用 MCP 服务器

### neovate run

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |
| `-m, --model <model>` | 指定要使用的模型 |
| `-q, --quiet` | 仅输出生成的命令（无 UI，适用于脚本） |
| `-y, --yes` | 无需确认直接执行命令 |

### neovate skill

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |
| `-g, --global` | 安装到全局技能目录 (~/.neovate/skills/) |
| `--overwrite` | 覆盖同名的现有技能 |
| `--name <name>` | 使用自定义名称安装 |
| `--target <dir>` | 技能的目标目录 |
| `--json` | 以 JSON 格式输出（仅 list 命令） |

子命令：
- `add <source>` - 从源安装技能（GitHub 仓库、子路径）
- `list|ls` - 列出所有可用的技能
- `remove|rm <name>` - 删除已安装的技能

### neovate update

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |

### neovate workspace

| 参数 | 描述 |
| --- | --- |
| `-h, --help` | 显示帮助 |

子命令：
- `create` - 创建新的工作区工作树
- `list|ls` - 列出所有活动的工作区
- `delete|rm <name>` - 删除工作区而不合并
- `complete` - 完成工作区并合并更改（从根目录运行）

Create 选项：
- `--name <name>` - 自定义工作区名称
- `-b, --branch <branch>` - 创建工作树的基础分支（默认：main）
- `--skip-update` - 跳过从远程更新基础分支

Delete 选项：
- `-f, --force` - 即使有未提交的更改也删除

## 指定 MCP 服务器

您可以使用 `--mcp-config` 来指定要使用的 MCP 服务器。此配置支持 JSON 字符串和文件路径两种方式。

```bash
# 使用 JSON 字符串
neovate -q --output-format stream-json "hello" --mcp-config '{"mcpServers": {"my-mcp-server": {"type": "stdio", "command": "my-mcp-server", "args": ["--port", "8080"]}}}'

# 使用文件路径
neovate -q --output-format stream-json "hello" --mcp-config ~/.neovate/mcp-config.json
```

## 指定系统提示

系统提示可以定义智能体的行为和偏好。如果您想使用自定义系统提示，有几种方法可以做到。

### 使用 `--output-style`

您可以使用 `--output-style` 来指定自定义输出样式。它支持内置输出样式的名称和输出样式文件的路径。

因此您可以创建一个输出样式 Markdown 文件，然后与 `--output-style` 一起使用。

首先，创建 `miao.md` 文件。

```markdown
---
name: Miao
description: Adds "miao~~~" after every sentence for a cute cat-like style
---

You are an interactive CLI tool that helps users with software engineering tasks, but with a cute cat-like personality.

# Miao Style Active

You should add "miao~~~" after every sentence. A sentence is typically defined as text ending with a period (.), exclamation mark (!), or question mark (?). Apply this consistently throughout your responses.

Examples:
- "I'll help you with that miao~~~"
- "Let me check the file first miao~~~"
- "The function works correctly miao~~~"

Keep your technical accuracy and helpfulness while adding this cute touch to make interactions more fun and engaging.
```

然后您可以将其与 `--output-style` 一起使用。

```bash
neovate -q --output-style "./miao.md" "hello"
```
