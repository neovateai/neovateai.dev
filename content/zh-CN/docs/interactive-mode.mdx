import { Callout } from 'nextra/components';

# 交互模式

Neovate Code 支持交互模式和无头模式。交互模式是默认模式。

在终端中运行 `neovate` 将为当前工作目录启动交互模式。

```bash
neovate
```

或者您可以指定特定的工作目录来启动。

```bash
neovate --cwd /path/to/your/project
```

## 键盘快捷键

| 快捷键 | 描述 |
| --- | --- |
| `Shift + Tab` | 切换到规划和头脑风暴模式 |
| `Ctrl + T` | 切换思考级别 |
| `上/下箭头` | 浏览对话历史 |
| `Option + 上箭头` | 编辑队列中的消息 |
| `Esc` 两次 | 分叉会话 |
| `/` | 启动斜杠命令 |
| `Ctrl + C` | 清除当前输入 |
| `Ctrl + C` 两次 | 退出 |
| `Shift + Enter` 或 `Option + Enter` | 多行输入 |
| `Ctrl + L` 两次 | 打开调试模式并打开日志文件 |
| `Ctrl + V` / `Cmd + V` | 从剪贴板粘贴图片 |
| `Ctrl + G` | 在外部编辑器中编辑提示 |

## 文件引用

您可以使用 `@` 来引用当前工作目录中的文件和目录。它会进行模糊搜索并建议最佳匹配的文件或目录名称。然后您可以按 `Tab` 或 `Enter` 来选择。

```bash
neovate "version of @package.json"
```

<Callout type="info">
  使用 `@` 引用的文件和目录将被添加到上下文中。如果您只想引用文件内容，只需按 `Tab`，它也会进行模糊搜索自动建议。
</Callout>

## 对话历史

关于对话历史的一些提示：

- 历史记录按工作目录存储在 `~/.neovate/projects/<project_name>/` 目录中，并命名为 `<session_id>.jsonl`。
- 使用 `-r, --resume` 从特定会话恢复。
- 使用 `-c, --continue` 从上次会话恢复。
- 使用 `上/下箭头` 浏览对话历史。
- 使用 `/clear` 清除对话历史并开始新会话（注意：原始对话会话保持不变）。

## 使用 `!` 前缀的 Bash 模式

通过在输入前添加 `!` 前缀，可以直接运行 bash 命令而无需经过 Neovate：

```bash
! npm test
! git status
! ls -la
```

- 将命令及其输出添加到对话上下文中
- 实时显示进度和输出
- 无需 Neovate 解释或批准命令

这对于在保持对话上下文的同时快速执行 shell 操作非常有用。

## 使用 Ctrl+R 反向搜索

按 `Ctrl+R` 可以交互式搜索命令历史：

1. 按 `Ctrl+R` 激活反向历史搜索
2. 输入要搜索的文本
3. 再次按 `Ctrl+R` 循环浏览更早的匹配项
4. 按 `Tab` 或 `Enter` 接受当前匹配项
5. 按 `Ctrl+C` 取消并恢复原始输入

## 多行输入

| 快捷键 | 描述 |
| --- | --- |
| `\` + `Enter` | 适用于所有终端 |
| `Option + Enter` | macOS 默认 |
| `Shift + Enter` | 运行 `/terminal-setup` 后 |
| `Ctrl + J` | 用于多行的换行字符 |

在终端设置中配置您偏好的换行行为。运行 `/terminal-setup` 为 iTerm2 和 VS Code 终端安装 Shift+Enter 绑定。

## 多模态输入

您可以向对话中添加图像，如截图、图表等。

有几种添加方式：

- 拖放图像到输入区域。
- 复制并粘贴图像到输入区域。
