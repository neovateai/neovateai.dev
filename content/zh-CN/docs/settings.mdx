# 设置

使用 JSON 文件配置 Neovate Code 设置，以自定义行为、偏好和集成选项。

## 文件位置

Neovate Code 支持项目和全局设置文件。

- **项目范围** 设置文件位于 `.neovate/config.json` 文件和 `.neovate/config.local.json` 文件，`.local.json` 文件适用于个人设置，不应提交到仓库。
- **全局范围** 设置文件位于 `~/.neovate/config.json` 文件。

## 模式

设置文件具有在 https://neovateai.dev/config.json 中定义的模式。基于此模式，您的编辑器应该能够验证和自动完成设置文件。

## `neovate config`

您可以使用 `neovate config` 来管理设置文件。

```bash
# 列出所有设置
neovate config ls

# 获取设置
neovate config get <key>

# 设置值
neovate config set <key> <value>

# 全局设置值
neovate config set <key> <value> -g

# 添加设置
neovate config add <key> <value>

# 删除设置
neovate config rm <key>
```

默认情况下，`neovate config` 将使用项目设置文件。您可以使用 `-g` 来使用全局设置文件。

## 可用设置

### approvalMode

使用的批准模式。

- 类型：`"autoEdit" | "yolo" | "default"`
- 默认：`"default"`

### agent

为不同的代理类型(子代理)配置特定设置。每个代理类型可以有自己的模型和其他配置。

- 类型：`Record<string, AgentConfig>`
- 默认：`{}`

每个代理配置可以包含：
- `model`：`string` - 此代理类型使用的模型（格式：`provider_id/model_id`）

示例：
```json
{
  "agent": {
    "Explore": {
      "model": "anthropic/claude-haiku-4-20250514"
    }
  }
}
```

**模型解析优先级：**
当执行代理时，模型按以下优先级顺序解析：
1. 传递给任务工具的显式模型参数
2. 在 `agent.{type}.model` 中配置的模型
3. 代理定义中定义的模型
4. 全局 `model` 设置（最终回退）

**可用的代理类型：**
- `Explore` - 专门用于探索代码库的快速代理
- `GeneralPurpose` - 通用型用于研究复杂问题、搜索代码和执行多步骤任务

### autoCompact

指定是否启用自动紧凑功能。禁用后,对话历史会持续累积,可能超出上下文限制。

- 类型：`boolean`
- 默认：`true`

### autoUpdate

指定是否启用自动更新。Neovate Code 将自动下载最新版本并更新自身。

- 类型：`boolean`
- 默认：`true`

### browser

指定是否启用浏览器 MCP 集成。

- 类型：`boolean`
- 默认：`false`

### commit

指定提交配置。

- 类型：`object`
- 默认：`{ language: "en" }`

可用选项：
- `language`：`string` - 提交消息的语言
- `systemPrompt`：`string` - 用于生成提交消息的自定义系统提示。自定义提示会**追加**到默认提示后面（而非替换），让你可以在保留基础功能的同时添加自定义规则。
- `model`：`string` - 用于生成提交消息的模型（格式：`provider_id/model_id`）

### desktop

桌面应用配置。此设置只能全局设置。

- 类型：`object`
- 默认：`{ theme: "light", sendMessageWith: "enter" }`

可用选项：
- `theme`：`"light" | "dark" | "system"` - 桌面应用的颜色主题
- `sendMessageWith`：`"enter" | "cmdEnter"` - 发送消息的按键组合
- `terminalFont`：`string` - 终端的自定义字体
- `terminalFontSize`：`number` - 终端的字体大小

### extensions

第三方自定义代理的扩展配置。允许任意嵌套配置，无需验证。

- 类型：`Record<string, any>`
- 默认：`{}`

### httpProxy

指定用于网络请求的 HTTP 代理。

- 类型：`string`
- 默认：null

### language

使用的语言。

- 类型：`string`
- 默认：`"English"`

### mcpServers

使用的 MCP 服务器。查看 [MCP](./mcp) 了解更多细节。

- 类型：`Record<string, McpServerConfig>`
- 默认：`{}`

每个服务器配置可以是以下之一：
- **stdio**：`{ type: "stdio", command: string, args: string[], env?: Record<string, string>, disable?: boolean }`
- **sse**：`{ type: "sse", url: string, headers?: Record<string, string>, disable?: boolean }`
- **http**：`{ type: "http", url: string, headers?: Record<string, string>, disable?: boolean }`

### model

使用的模型。格式：`provider_id/model_id`。查看 [模型](./models) 了解更多细节。

- 类型：`string`
- 默认：null

### notification

指定会话完成时的通知行为。

- 类型：`boolean | string`
- 默认：`false`

可用选项：
- `false` - 禁用通知
- `true` - 启用默认声音（"Funk"）
- 声音名称字符串 - 播放指定的声音（例如 "Glass"、"Ping"）
- URL 字符串（以 `http://` 或 `https://` 开头）- 向该 URL 发送 HTTP GET 请求

**平台支持：**
- **macOS**：完整的声音支持，使用 `/System/Library/Sounds/` 中的系统声音
- **Linux/Windows**：回退到终端响铃

**可用的 macOS 声音：** Basso、Blow、Bottle、Frog、Funk、Glass、Hero、Morse、Ping、Pop、Purr、Sosumi、Submarine、Tink

**Webhook URL 模板变量：**

使用 URL 时，可以使用 `{{varName}}` 语法的模板变量：

| 变量 | 描述 |
|----------|-------------|
| `cwd` | 项目根目录 |
| `name` | 项目目录名称（cwd 的基本名称） |

示例：
```json
{ "notification": true }
{ "notification": "Glass" }
{ "notification": "https://example.com/webhook?project={{name}}" }
```

### outputFormat

CLI 响应的输出格式。

- 类型：`"text" | "stream-json" | "json"`
- 默认：`"text"`

### outputStyle

使用的输出样式。查看 [输出样式](./output-style) 了解更多细节。

- 类型：`string`
- 默认：`"Default"`

### planModel

使用的规划模型。格式：`provider_id/model_id`。

- 类型：`string`
- 默认：使用与 `model` 相同的模型

### plugins

使用的插件。查看 [插件](./plugins) 了解更多细节。

- 类型：`string[]`
- 默认：`[]`

### provider

自定义提供商配置。允许覆盖默认提供商设置。

- 类型：`Record<string, ProviderConfig>`
- 默认：`{}`

每个提供商配置可以包含：
- `id`：`string` - 提供商标识符
- `name`：`string` - 提供商的显示名称
- `env`：`string[]` - API 密钥的环境变量名
- `apiEnv`：`string[]` - 自定义 API 基础 URL 的环境变量名
- `api`：`string` - 默认 API 基础 URL
- `doc`：`string` - 文档 URL
- `models`：`Record<string, string | Omit<Model, 'id' | 'cost'>>` - 模型 ID 到模型名称的映射
- `options`：`object` - 提供商选项
  - `apiKey`：`string` - 提供商的 API 密钥
  - `baseURL`：`string` - 提供商 API 的自定义基础 URL
  - `headers`：`Record<string, string>` - 自定义请求头
  - `httpProxy`：`string` - 此提供商的 HTTP 代理 URL

### quiet

指定是否抑制非必要输出。

- 类型：`boolean`
- 默认：`false`

### smallModel

用于轻量级任务的小模型。格式：`provider_id/model_id`。

- 类型：`string`
- 默认：使用与 `model` 相同的模型

### systemPrompt

指定使用的系统提示。

- 类型：`string`
- 默认：null

### temperature

模型响应使用的温度参数。

- 类型：`number`
- 默认：null

### todo

指定是否启用待办事项功能。

- 类型：`boolean`
- 默认：`true`

### tools

工具配置，用于启用/禁用特定工具。将工具名称设置为 `false` 以禁用它。

- 类型：`Record<string, boolean>`
- 默认：`{}`

### visionModel

用于图像相关任务的视觉模型。格式：`provider_id/model_id`。

- 类型：`string`
- 默认：使用与 `model` 相同的模型
